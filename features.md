ржжрж╛рж░рзБржг ржкрзНрж░рж╢рзНржи! рждрзБржорж┐ ржПржЦржи ржПржоржи ржПржХржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи-рж░рзЗржбрж┐ **Blog CMS** ржмрж╛ржирж┐рзЯрзЗржЫрзЛ ржпрж╛рж░ ржЙржкрж░ ржЕржирзЗржХ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ ржлрж┐ржЪрж╛рж░ рж╕рж╣ржЬрзЗржЗ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛рзЯред

ржирзАржЪрзЗ **Extra/Advanced Features** ржЧрзБрж▓рзЛ рзи ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗржЦрж╛рж▓рж╛ржо:  
ЁЯУж **Functionality ржлрж┐ржЪрж╛рж░** (User & Admin Use)  
ЁЯФз **Technical/Developer Level ржлрж┐ржЪрж╛рж░**

---

## ЁЯУж **Functional Features (User & Admin Experience ржЙржирзНржиржд ржХрж░рж╛рж░ ржЬржирзНржп)**

| ржлрж┐ржЪрж╛рж░ | ржмрж░рзНржгржирж╛ |
|--------|--------|
| ЁЯЦКя╕П **WYSIWYG Editor** | Rich Text Editor (React Quill, TipTap, etc.) ржжрж┐рзЯрзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржмрзНрж▓ржЧ рж▓рж┐ржЦрждрзЗ ржкрж╛рж░ржмрзЗ |
| ЁЯЦ╝я╕П **Image Upload in Blog** | Cloudinary/S3 ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржмрзНрж▓ржЧрзЗ ржЫржмрж┐ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛ржмрзЗ |
| ЁЯУЕ **Schedule Publish Time** | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ ржжрж┐рж▓рзЗ ржмрзНрж▓ржЧ future-рждрзЗ ржирж┐ржЬрзЗ ржирж┐ржЬрзЗ publish рж╣ржмрзЗ |
| ЁЯП╖я╕П **Tags System** | ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗ multiple tags ржерж╛ржХржмрзЗ, tag ржЕржирзБржпрж╛рзЯрзА ржмрзНрж▓ржЧ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗ |
| ЁЯФН **Search Functionality** | ржЗржЙржЬрж╛рж░рж░рж╛ ржХрж┐ржУрзЯрж╛рж░рзНржб ржжрж┐рзЯрзЗ ржмрзНрж▓ржЧ ржЦрзБржБржЬрзЗ ржкрж╛ржмрзЗ (title/content-based) |
| тЭдя╕П **Like / Bookmark System** | ржЗржЙржЬрж╛рж░рж░рж╛ ржмрзНрж▓ржЧрзЗ тЭдя╕П ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЗ ржмрж╛ рж╕рзЗржн ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЗ |
| ЁЯСе **Multi Author Support** | ржПржХрж╛ржзрж┐ржХ рж▓рзЗржЦржХ ржЕрзНржпрж╛ржб ржХрж░рж╛ ржпрж╛ржмрзЗ, ржкрзНрж░рждрзНржпрзЗржХрзЗрж░ ржЖрж▓рж╛ржжрж╛ ржмрж╛рзЯрзЛ ржерж╛ржХржмрзЗ |
| ЁЯТм **Comments System** | Disqus ржмрж╛ ржирж┐ржЬрж╕рзНржм ржХржорзЗржирзНржЯ ржлрж┐ржЪрж╛рж░ ржжрж┐рзЯрзЗ ржкрж╛ржаржХрж░рж╛ ржоржирзНрждржмрзНржп ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ |
| ЁЯМР **Multilingual Blog (i18n)** | ржмрж╛ржВрж▓рж╛, ржЗржВрж░рзЗржЬрж┐ ржмрж╛ ржЕржирзНржп ржнрж╛рж╖рж╛рзЯ ржХржиржЯрзЗржирзНржЯ ржжрзЗрзЯрж╛ ржпрж╛ржмрзЗ |
| ЁЯУй **Newsletter Integration** | ржЗржЙржЬрж╛рж░ ржЗржорзЗржЗрж▓ ржжрж┐рзЯрзЗ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ (Mailchimp, ConvertKit) |
| ЁЯФЧ **Related Posts** | ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ ржирж┐ржЪрзЗ Similar ржмрж╛ Related ржкрзЛрж╕рзНржЯ ржжрзЗржЦрж╛ржирзЛ |
| ЁЯСА **Reading Time Estimate** | ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ ржЬржирзНржп Estimated Reading Time ржжрзЗржЦрж╛ржирзЛ |
| ЁЯУД **Printable Version / PDF Export** | ржмрзНрж▓ржЧржХрзЗ PDF рждрзЗ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржмрж╛ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рж╛ ржпрж╛ржмрзЗ |
| ЁЯУИ **Blog Analytics** | ржХрждржмрж╛рж░ ржжрзЗржЦрж╛ рж╣рзЯрзЗржЫрзЗ, ржХрзЛржи ржкрзЛрж╕рзНржЯ ржмрзЗрж╢рж┐ popularтАФржПрж╕ржм ржЯрзНрж░рзНржпрж╛ржХ |
| ЁЯМУ **Dark Mode** | UI-рждрзЗ Dark/Light mode toggle |
| ЁЯзСтАНЁЯТ╝ **Author Dashboard** | рж▓рзЗржЦржХржЧржг ржХрзЗржмрж▓ рждрж╛ржжрзЗрж░ рж▓рзЗржЦрж╛ ржкрзЛрж╕рзНржЯ ржжрзЗржЦрждрзЗ/ржПржбрж┐ржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ |
| ЁЯФР **Two-Factor Authentication** | Login security ржЖрж░ржУ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржХрж░рждрзЗ 2FA |
| тЬи **AI Blog Suggestion** | ржмрзНрж▓ржЧ ржЯрж╛ржЗржЯрзЗрж▓/ржЯржкрж┐ржХ ржжрж┐рж▓рзЗ AI ржХржиржЯрзЗржирзНржЯ рж╕рж╛ржЬрзЗрж╢ржи ржжрзЗржмрзЗ (OpenAI API) |

---

## ЁЯФз **Technical Features (Developer & Performance)**

| ржлрж┐ржЪрж╛рж░ | ржмрж░рзНржгржирж╛ |
|--------|--------|
| тЪб **Incremental Static Regeneration (ISR)** | рж╢рзБржзрзБ ржпрзЗрж╕ржм ржкрзЗржЗржЬ ржЪрзЗржЮрзНржЬ рж╣рзЯ рж╕рзЗржЧрзБрж▓рзЛ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ рж░рж┐-ржмрж┐рж▓рзНржб рж╣ржмрзЗ |
| ЁЯФз **Custom 404 & Error Pages** | рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ Not Found ржмрж╛ Server Error рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ |
| ЁЯФБ **Client-side Pagination or Infinite Scroll** | ржмрзНрж▓ржЧ рж▓рж┐рж╕рзНржЯ ржмрзЬ рж╣рж▓рзЗ Scroll ржХрж░рж▓рзЗ ржирждрзБржи ржмрзНрж▓ржЧ рж▓рзЛржб рж╣ржмрзЗ |
| ЁЯза **Content Versioning** | ржмрзНрж▓ржЧ ржПржбрж┐ржЯ ржХрж░рж▓рзЗ ржкрзБрж░ржирзЛ ржнрж╛рж░рзНрж╕ржи рж░рзЗржЦрзЗ ржжрзЗрзЯрж╛ |
| ЁЯУК **Sitemap & robots.txt** | SEO-friendly рж╕рж╛ржЗржЯржорзНржпрж╛ржк ржЬрзЗржирж╛рж░рзЗрж╢ржи |
| ЁЯкк **JWT Refresh Token System** | рж╕рзЗрж╢ржи ржПржХрзНрж╕ржкрж╛рзЯрж╛рж░ ржирж╛ ржХрж░рзЗ рж░рж┐ржлрзНрж░рзЗрж╢ ржЯрзЛржХрзЗржи ржжрж┐рзЯрзЗ login ржЯрж┐ржХрж┐рзЯрзЗ рж░рж╛ржЦрж╛ |
| ЁЯзк **Unit & Integration Testing** | Jest/React Testing Library ржжрж┐рзЯрзЗ ржХрзЛржб ржЯрзЗрж╕рзНржЯ |
| ЁЯФН **ElasticSearch Integration** | ржПржбржнрж╛ржирзНрж╕ рж╕рж╛рж░рзНржЪ ржУ ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ |
| ЁЯЧВя╕П **CMS Admin Interface** | Custom UI (drag & drop, visual editor) admin panel ржПрж░ ржЬржирзНржп |
| ЁЯзй **Plugin System** | ржлрж┐ржЪрж╛рж░ржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ module ржЖржХрж╛рж░рзЗ ржкрзНрж▓рж╛ржЧрж┐ржирзЗрж░ ржорждрзЛ ржпрзБржХрзНржд/ржЕржл ржХрж░рж╛ |

---

## тЬЕ **рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ** ржЖржорж┐ ржирж┐ржЪрзЗрж░ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐:

- тЬЕ WYSIWYG Editor рж╕ржВржпрзБржХрзНржд ржХрж░рж╛ (React Quill ржмрж╛ TipTap)
- тЬЕ Image Upload ржпрзБржХрзНржд ржХрж░рж╛ (Cloudinary ржмрж╛ ржЕржирзНржп ржХрзЛржирзЛ API ржжрж┐рзЯрзЗ)
- тЬЕ Search Bar ржпрзЛржЧ ржХрж░рж╛
- тЬЕ Tag рж╕рж┐рж╕рзНржЯрзЗржо ржмрж╛ Category-wise ржлрж┐рж▓рзНржЯрж╛рж░ ржпрзБржХрзНржд ржХрж░рж╛
- тЬЕ Related Posts & Estimated Reading Time
- тЬЕ AI Integration ржжрж┐рзЯрзЗ Smart Features

---

ЁЯФФ **рждрзБржорж┐ ржХрзЛржи ржлрж┐ржЪрж╛рж░ ржЖржЧрзЗ ржЕрзНржпрж╛ржб ржХрж░рждрзЗ ржЪрж╛ржУ? ржЖржорж┐ рж╕рзЗржЗржЯрж╛ ржзрж░рзЗ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм рж╢рзБрж░рзБ ржХрж░ржмрзЛ, ржкрзБрж░рж╛ ржХрзЛржб ржУ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣ред**  
ржмрж▓рж▓рзЗржЗ рж╢рзБрж░рзБ ржХрж░рж┐, ржнрж╛ржЗ! ЁЯШО


----
ржЪрж▓ рждрж╛рж╣рж▓рзЗ рж╢рзБрж░рзБ ржХрж░рж┐ ржЖржорж╛ржжрзЗрж░ **Next.js Blog CMS-ржПрж░ Advanced Feature Integration рж╕рж┐рж░рж┐ржЬ** тЬЕ  
ржЖржорж┐ ржкрзНрж░рждрж┐ржЯрж┐ ржлрж┐ржЪрж╛рж░ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ **fully implement ржХрж░рзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣** ржжрж┐ржЪрзНржЫрж┐ред ржкрзНрж░ржержорзЗ рж╢рзБрж░рзБ ржХрж░ржмрзЛ **WYSIWYG Editor Integration** ржжрж┐рзЯрзЗред

---

# тЬЕ **ржкрж░рзНржм рзп: Rich Text Editor (WYSIWYG) Integration with React Quill**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ Admin Dashboard ржерзЗржХрзЗ Rich Text ржПржбрж┐ржЯрж░ ржжрж┐рзЯрзЗ ржмрзНрж▓ржЧ ржХржиржЯрзЗржирзНржЯ рж▓рзЗржЦрж╛  
тЬЕ HTML content DB рждрзЗ рж╕рзЗржн рж╣ржУрзЯрж╛  
тЬЕ ржмрзНрж▓ржЧ ржбрж┐ржЯрзЗржЗрж▓рж╕ ржкрзЗржЬрзЗ рж╕рзЗржЗ HTML ржкрзНрж░ржкрж╛рж░рж▓рж┐ ржжрзЗржЦрж╛ржирзЛ

---

## ЁЯУж Step 1: React Quill ржЗржирж╕рзНржЯрж▓ ржХрж░рзЛ  
```bash
npm install react-quill
```

ЁЯУБ **styles/globals.css** ржП Quill CSS ржпрзЛржЧ ржХрж░рзЛ:
```css
@import "react-quill/dist/quill.snow.css";
```

---

## ЁЯз▒ Step 2: Blog Create Page-ржП WYSIWYG Editor ржпрзЛржЧ ржХрж░рзЛ

ЁЯУБ **pages/admin/create.js** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
import AdminRoute from "@/components/AdminRoute";
import { useState } from "react";
import { useRouter } from "next/router";
import dynamic from "next/dynamic";

const ReactQuill = dynamic(() => import("react-quill"), { ssr: false });

export default function CreateBlog() {
  const [form, setForm] = useState({ title: "", content: "" });
  const router = useRouter();

  const handleSubmit = async (e) => {
    e.preventDefault();

    const res = await fetch("/api/blog/create", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(form),
    });

    if (res.ok) router.push("/admin/blogs");
  };

  return (
    <AdminRoute>
      <div className="max-w-2xl mx-auto mt-10">
        <h1 className="text-3xl font-bold">Create Blog</h1>
        <form onSubmit={handleSubmit} className="space-y-4">
          <input
            type="text"
            placeholder="Title"
            className="w-full p-2 border"
            value={form.title}
            onChange={(e) => setForm({ ...form, title: e.target.value })}
          />

          <ReactQuill
            theme="snow"
            value={form.content}
            onChange={(value) => setForm({ ...form, content: value })}
          />

          <button type="submit" className="bg-blue-600 text-white p-2 w-full">Submit</button>
        </form>
      </div>
    </AdminRoute>
  );
}
```

---

## ЁЯФН Step 3: ржмрзНрж▓ржЧ ржбрж┐ржЯрзЗржЗрж▓рж╕ ржкрзЗржЗржЬрзЗ HTML ржХржиржЯрзЗржирзНржЯ рж╢рзЛ ржХрж░рж╛ржирзЛ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржПржЗ ржЕржВрж╢ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
<div className="mt-6 text-lg" dangerouslySetInnerHTML={{ __html: blog.content }} />
```

ЁЯЫбя╕П **Note:** `dangerouslySetInnerHTML` ржмрзНржпржмрж╣рж╛рж░рзЗ XSS ржЭрзБржБржХрж┐ ржерж╛ржХрзЗред рждрж╛ржЗ ржХржирзНржЯрзЗржирзНржЯ sanitize ржХрж░рж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржкрж░рзЗ `DOMPurify` ржЕрзНржпрж╛ржб ржХрж░ржмрзЛред

---

## тЬЕ ржПржЗ ржкрж░рзНржмрзЗ ржпрж╛ рж╣рж▓рзЛ:

| ржмрж┐рж╖рзЯ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|------|---------|
| React Quill ржЗржирж╕рзНржЯрж▓ ржУ ржХржиржлрж┐ржЧрж╛рж░ | тЬЕ |
| Admin Page ржП Editor ржпрзБржХрзНржд | тЬЕ |
| ржмрзНрж▓ржЧ ржХржиржЯрзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ HTML рж╕рзЗржн рж╣ржЪрзНржЫрзЗ | тЬЕ |
| Blog Page ржП HTML рж░рзЗржирзНржбрж╛рж░ рж╣ржЪрзНржЫрзЗ | тЬЕ |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:  
**Image Upload System (Cloudinary Integration)** тАУ  
- Editor-ржП ржЫржмрж┐ ржЖржкрж▓рзЛржб  
- Cover Image Support  
- Multiple Images Handling  

ЁЯЯв **рж╢рзБрж░рзБ ржХрж░ржмрзЛ? ржирж╛ржХрж┐ WYSIWYG Editor ржирж┐рзЯрзЗ ржХрзЛржирзЛ ржкрзНрж░рж╢рзНржи ржЖржЫрзЗ?**


ржЪрж▓ ржПржмрж╛рж░ ржЖржорж░рж╛ ржпрзЛржЧ ржХрж░рж┐ тАФ  
# **ЁЯУ╖ ржкрж░рзНржм рззрзж: Image Upload System (Cloudinary Integration)**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржмрзНрж▓ржЧрзЗ **ржЫржмрж┐ ржЖржкрж▓рзЛржб** ржХрж░рж╛ (WYSIWYG + Cover Image)  
тЬЕ **Cloudinary** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЗржорзЗржЬ рж╣рзЛрж╕рзНржЯрж┐ржВ  
тЬЕ ржЗржЙржЬрж╛рж░ ржЗржорзЗржЬ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗржЗ рждрж╛ Cloudinary-рждрзЗ ржЖржкрж▓рзЛржб рж╣ржмрзЗ  
тЬЕ рж╕рзЗржЗ URL ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХржиржЯрзЗржирзНржЯрзЗ ржЗржорзЗржЬ ржпрзБржХрзНржд рж╣ржмрзЗ  

---

## ЁЯФз Step 1: Cloudinary Setup

### тЬЕ Cloudinary Account рждрзИрж░рж┐ ржХрж░рзЛ:
1. [https://cloudinary.com/](https://cloudinary.com/) ржП ржЧрж┐рзЯрзЗ **Free Account** ржЦрзБрж▓рзЛ  
2. **Dashboard > Account Details** ржерзЗржХрзЗ ржирж┐ржЪрзЗрж░ рзйржЯрж┐ рждржерзНржп рж░рж╛ржЦрзЛ:
   - **Cloud name**
   - **API Key**
   - **API Secret**

### ЁЯУБ .env ржлрж╛ржЗрж▓рзЗ ржПржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рзЛ:
```env
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret
```

---

## ЁЯУж Step 2: Cloudinary SDK ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЛ
```bash
npm install cloudinary multer
```

---

## ЁЯУБ Step 3: Image Upload API Route рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **pages/api/upload.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { v2 as cloudinary } from "cloudinary";
import multer from "multer";
import nextConnect from "next-connect";

cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});

const upload = multer({ storage: multer.memoryStorage() });

const apiRoute = nextConnect({
  onError(error, req, res) {
    res.status(501).json({ error: `Upload error: ${error.message}` });
  },
  onNoMatch(req, res) {
    res.status(405).json({ error: `Method ${req.method} Not Allowed` });
  },
});

apiRoute.use(upload.single("file"));

apiRoute.post(async (req, res) => {
  const file = req.file;

  const result = await cloudinary.uploader.upload_stream(
    { folder: "blog-cms" },
    (error, result) => {
      if (error) return res.status(500).json({ error: "Upload failed" });
      res.status(200).json({ url: result.secure_url });
    }
  );

  result.end(file.buffer);
});

export default apiRoute;

export const config = {
  api: {
    bodyParser: false,
  },
};
```

ЁЯФ╣ **ржХрзЛржб ржмрзНржпрж╛ржЦрзНржпрж╛:**  
- `multer.memoryStorage()` ржжрж┐рзЯрзЗ ржлрж╛ржЗрж▓ ржорзЗржорзЛрж░рж┐рждрзЗ рж░рж╛ржЦрж╛ рж╣ржЪрзНржЫрзЗ  
- `cloudinary.uploader.upload_stream()` ржжрж┐рзЯрзЗ ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб рж╣ржЪрзНржЫрзЗ  
- API call ржХрж░рж▓рзЗ ржЗржорзЗржЬрзЗрж░ `secure_url` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗ

---

## ЁЯОи Step 4: Cover Image Upload UI рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **pages/admin/create.js** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
const [coverImage, setCoverImage] = useState("");

const handleImageUpload = async (e) => {
  const file = e.target.files[0];
  const formData = new FormData();
  formData.append("file", file);

  const res = await fetch("/api/upload", {
    method: "POST",
    body: formData,
  });

  const data = await res.json();
  setCoverImage(data.url);
};
```

ЁЯСЗ HTML Input Field:
```js
<input type="file" onChange={handleImageUpload} className="w-full p-2 border" />
{coverImage && <img src={coverImage} alt="Cover" className="w-full h-48 object-cover mt-2" />}
```

ЁЯУж ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯрзЗ coverImage ржлрж┐рж▓рзНржбржУ ржкрж╛ржарж╛ржУ:
```js
body: JSON.stringify({ ...form, coverImage }),
```

Prisma model-ржП `coverImage` ржлрж┐рж▓рзНржб ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ `schema.prisma` ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model Blog {
  id          String   @id @default(uuid())
  title       String
  slug        String   @unique
  content     String
  coverImage  String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  ...
}
```

рждрж╛рж░ржкрж░ push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## тЬЕ ржкрж░рзНржм рззрзж ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Cloudinary ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи | Done |
| тЬЕ Cover Image Upload | Done |
| тЬЕ Preview & Auto Save | Done |
| тЬЕ Prisma Model ржЖржкржбрзЗржЯ | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯФН Blog Search Functionality (title/content-based)**  
тЬЕ рж╕рж╛рж░рзНржЪ ржмрж╛рж░рзЗ ржЯрж╛ржЗржк ржХрж░рж▓рзЗржЗ рж░рж┐рзЯрзЗрж▓-ржЯрж╛ржЗржорзЗ ржлрж▓рж╛ржлрж▓  
тЬЕ ржХрж┐ржУрзЯрж╛рж░рзНржб рж╣рж╛ржЗрж▓рж╛ржЗржЯрж┐ржВ  
тЬЕ URL query ржжрж┐рзЯрзЗ рж╕рж╛рж░рзНржЪ persist ржХрж░рж╛

ЁЯЯв **ржПржЦржи ржХрж┐ рж╕рж╛рж░рзНржЪ ржлрж┐ржЪрж╛рж░рзЗ ржпрж╛ржЗ?**  
ржирж╛ржХрж┐ Image Upload ржирж┐рзЯрзЗ ржХрж┐ржЫрзБ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?


ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржХрж░рж┐ тАФ  
# **ЁЯФН ржкрж░рзНржм рззрзз: Blog Search Functionality (Title & Content Based)**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ рж╣рзЛржоржкрзЗржЬ ржмрж╛ ржпрзЗржХрзЛржирзЛ ржкрзЗржЬрзЗ рж╕рж╛рж░рзНржЪ ржмрж╛рж░ ржерж╛ржХржмрзЗ  
тЬЕ ржЗржЙржЬрж╛рж░ ржХрж┐ржУрзЯрж╛рж░рзНржб рж▓рж┐ржЦрж▓рзЗржЗ рж╕рзЗржЗ ржЕржирзБржпрж╛рзЯрзА ржмрзНрж▓ржЧ ржлрж┐рж▓рзНржЯрж╛рж░ рж╣ржмрзЗ  
тЬЕ рж╕рж╛рж░рзНржЪ ржХрж┐ржУрзЯрж╛рж░рзНржб URL query-рждрзЗ ржерж╛ржХржмрзЗ (shareable/searchable)  
тЬЕ ржХрж┐ржУрзЯрж╛рж░рзНржб рж╣рж╛ржЗрж▓рж╛ржЗржЯ ржХрж░рж╛ (ржкрж░ржмрж░рзНрждрзА ржлрж┐ржЪрж╛рж░)  

---

## ЁЯУж Step 1: Search Bar Component рждрзИрж░рж┐ ржХрж░рж╛

ЁЯУБ **components/SearchBar.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { useRouter } from "next/router";
import { useState } from "react";

export default function SearchBar() {
  const router = useRouter();
  const [query, setQuery] = useState(router.query.q || "");

  const handleSearch = (e) => {
    e.preventDefault();
    router.push(`/?q=${query}`);
  };

  return (
    <form onSubmit={handleSearch} className="flex gap-2 mb-6">
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="Search blog..."
        className="border px-4 py-2 w-full"
      />
      <button type="submit" className="bg-blue-600 text-white px-4 py-2">
        Search
      </button>
    </form>
  );
}
```

---

## ЁЯПа Step 2: рж╣рзЛржоржкрзЗржЬрзЗ рж╕рж╛рж░рзНржЪ ржмрж╛рж░ ржУ ржлрж┐рж▓рзНржЯрж╛рж░ ржпрзБржХрзНржд ржХрж░рж╛

ЁЯУБ **pages/index.js** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
import { useRouter } from "next/router";
import { useEffect, useState } from "react";
import Link from "next/link";
import SearchBar from "@/components/SearchBar";

export default function Home() {
  const [blogs, setBlogs] = useState([]);
  const [filtered, setFiltered] = useState([]);
  const router = useRouter();
  const { q } = router.query;

  useEffect(() => {
    fetch("/api/blog")
      .then((res) => res.json())
      .then((data) => {
        setBlogs(data);
        if (q) {
          const keyword = q.toLowerCase();
          const results = data.filter(
            (b) =>
              b.title.toLowerCase().includes(keyword) ||
              b.content.toLowerCase().includes(keyword)
          );
          setFiltered(results);
        } else {
          setFiltered(data);
        }
      });
  }, [q]);

  return (
    <div className="container mx-auto py-10">
      <h1 className="text-4xl font-bold text-center mb-6">Latest Blogs</h1>
      <SearchBar />

      {filtered.length === 0 && <p className="text-center">No blog found.</p>}

      <div className="grid md:grid-cols-3 gap-6">
        {filtered.map((blog) => (
          <div key={blog.id} className="border p-4 rounded-lg shadow-md">
            <h2 className="text-xl font-semibold">{blog.title}</h2>
            <p className="text-gray-600 text-sm">By {blog.author.name}</p>
            <p className="mt-2 text-gray-800" dangerouslySetInnerHTML={{
              __html: blog.content.substring(0, 100)
            }}></p>
            <Link href={`/blog/${blog.slug}`} className="text-blue-500 mt-3 inline-block">
              Read More
            </Link>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ЁЯзк Optional (Test Search):  
- рж╕рж╛рж░рзНржЪ ржХрж░рзЛ: `localhost:3000/?q=react`  
- ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗ, ржХржирзНржЯрзЗржирзНржЯ/ржЯрж╛ржЗржЯрзЗрж▓ ржорзНржпрж╛ржЪ рж╣рж▓рзЗ  
- рж╕рж╛рж░рзНржЪ ржмрж╛рж░ ржЕржЯрзЛ-ржлрж┐рж▓ржб ржерж╛ржХржмрзЗ URL ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ

---

## тЬЕ ржкрж░рзНржм рззрзз ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Search Bar Component | Done |
| тЬЕ Title & Content Filtering | Done |
| тЬЕ URL Query sync | Done |
| тЬЕ Real-time Result | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯП╖я╕П ржкрж░рзНржм рззрзи: Tags System & Filtering by Tag**  
тЬЕ ржмрзНрж▓ржЧрзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзНржпрж╛ржЧ  
тЬЕ ржЯрзНржпрж╛ржЧ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржЯрзНржпрж╛ржЧ ржЕржирзБржпрж╛рзЯрзА ржлрж┐рж▓рзНржЯрж╛рж░  
тЬЕ Tag-based ржмрзНрж▓ржЧ рж▓рж┐рж╕рзНржЯ ржкрзЗржЬ

ЁЯЯв **ржпрж╛ржмрзЛ? ржирж╛ржХрж┐ рж╕рж╛рж░рзНржЪ рж╕рж┐рж╕рзНржЯрзЗржо ржирж┐рзЯрзЗ ржХрж┐ржЫрзБ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?**


ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржпрзЛржЧ ржХрж░рж┐ тАФ  
# **ЁЯП╖я╕П ржкрж░рзНржм рззрзи: Tags System & Tag-based Filtering**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзНржпрж╛ржЧ ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ  
тЬЕ ржЯрзНржпрж╛ржЧ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ рж╕рзЗржЗ ржЯрзНржпрж╛ржЧ ржЕржирзБржпрж╛рзЯрзА ржмрзНрж▓ржЧ ржлрж┐рж▓рзНржЯрж╛рж░ рж╣ржмрзЗ  
тЬЕ ржЖрж▓рж╛ржжрж╛ Tag Page ржерж╛ржХржмрзЗ (e.g. `/tag/javascript`)  
тЬЕ ржЯрзНржпрж╛ржЧ ржЕржирзБржпрж╛рзЯрзА SEO ржХрж░рж╛ ржпрж╛ржмрзЗ  

---

## ЁЯзй Step 1: Prisma Model-ржП Tags ржпрзБржХрзНржд ржХрж░рж╛

ЁЯУБ **prisma/schema.prisma** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model Tag {
  id    String  @id @default(uuid())
  name  String  @unique
  blogs Blog[]  @relation("BlogTags", references: [id])
}

model Blog {
  id         String   @id @default(uuid())
  title      String
  slug       String   @unique
  content    String
  coverImage String?
  tags       Tag[]    @relation("BlogTags")
  ...
}
```

ЁЯУж ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## ЁЯз▒ Step 2: Blog Create Page-ржП Tag Input Field ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **pages/admin/create.js** ржП ржпрзБржХрзНржд ржХрж░рзЛ:

```js
const [tags, setTags] = useState([]);
const [tagInput, setTagInput] = useState("");

const addTag = () => {
  if (tagInput.trim() && !tags.includes(tagInput)) {
    setTags([...tags, tagInput.trim()]);
    setTagInput("");
  }
};

const removeTag = (tag) => {
  setTags(tags.filter((t) => t !== tag));
};
```

ЁЯСЗ Input Field:
```js
<div>
  <label className="block font-semibold mb-1">Tags</label>
  <div className="flex gap-2">
    <input
      type="text"
      value={tagInput}
      onChange={(e) => setTagInput(e.target.value)}
      placeholder="Add tag"
      className="border px-2 py-1"
    />
    <button type="button" onClick={addTag} className="bg-blue-600 text-white px-3">+</button>
  </div>
  <div className="mt-2 flex flex-wrap gap-2">
    {tags.map((tag, i) => (
      <span key={i} className="bg-gray-200 px-2 py-1 rounded-full text-sm">
        {tag} <button onClick={() => removeTag(tag)} className="ml-1 text-red-500">x</button>
      </span>
    ))}
  </div>
</div>
```

---

## ЁЯЪА Step 3: Blog Create API-рждрзЗ Tags рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЛ

ЁЯУБ **pages/api/blog/create.js** ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
const { title, content, coverImage, tags = [], categoryId, authorId } = req.body;

const blog = await prisma.blog.create({
  data: {
    title,
    slug: title.toLowerCase().replace(/ /g, "-"),
    content,
    coverImage,
    categoryId,
    authorId,
    published: false,
    tags: {
      connectOrCreate: tags.map((tag) => ({
        where: { name: tag },
        create: { name: tag },
      })),
    },
  },
  include: { tags: true },
});
```

---

## ЁЯМР Step 4: ржЯрзНржпрж╛ржЧ ржкрзЗржЬ ржУ ржЯрзНржпрж╛ржЧ ржХрзНрж▓рж┐ржХ рж░рж╛ржЙржЯрж┐ржВ рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **pages/tag/[name].js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { useRouter } from "next/router";
import { useEffect, useState } from "react";
import Link from "next/link";

export default function TagPage() {
  const { name } = useRouter().query;
  const [blogs, setBlogs] = useState([]);

  useEffect(() => {
    if (name) {
      fetch(`/api/tag/${name}`)
        .then((res) => res.json())
        .then((data) => setBlogs(data));
    }
  }, [name]);

  return (
    <div className="container mx-auto py-10">
      <h1 className="text-3xl font-bold mb-6">Blogs tagged with тАЬ{name}тАЭ</h1>
      <div className="grid md:grid-cols-3 gap-6">
        {blogs.map((blog) => (
          <div key={blog.id} className="border p-4 rounded-lg">
            <h2 className="text-xl font-semibold">{blog.title}</h2>
            <Link href={`/blog/${blog.slug}`} className="text-blue-500 mt-2 block">Read More</Link>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ЁЯУБ Step 5: Tag API Route рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **pages/api/tag/[name].js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  const { name } = req.query;

  try {
    const tag = await prisma.tag.findUnique({
      where: { name },
      include: {
        blogs: {
          include: { author: true, category: true, tags: true },
        },
      },
    });

    if (!tag) return res.status(404).json([]);

    res.status(200).json(tag.blogs);
  } catch {
    res.status(500).json({ error: "Server Error" });
  }
}
```

---

## ЁЯТа Step 6: ржмрзНрж▓ржЧ ржХрж╛рж░рзНржбрзЗ Tag ржЧрзБрж▓рзЛ ржжрзЗржЦрж╛ржУ (Optional)

ЁЯУБ **BlogCard.js** ржмрж╛ **index.js**-ржП:

```js
<div className="flex gap-2 mt-2 flex-wrap">
  {blog.tags.map((tag) => (
    <Link href={`/tag/${tag.name}`} key={tag.id}>
      <span className="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm">
        #{tag.name}
      </span>
    </Link>
  ))}
</div>
```

---

## тЬЕ ржкрж░рзНржм рззрзи ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Tag Model in DB | Done |
| тЬЕ Blog Create with Tags | Done |
| тЬЕ Tag Page | Done |
| тЬЕ Clickable Tags | Done |
| тЬЕ Tag-based Filtering | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:  
**ЁЯУЪ Related Blogs Section & Reading Time Estimate**  
тЬЕ ржПржХржЗ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рж░ ржмрж╛ ржЯрзНржпрж╛ржЧрзЗрж░ ржмрзНрж▓ржЧ рж╕рж╛ржЬрзЗрж╕рзНржЯ ржХрж░рж╛  
тЬЕ Estimated Reading Time ржжрзЗржЦрж╛ржирзЛ

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐? ржирж╛ржХрж┐ Tag System ржирж┐рзЯрзЗ ржХрж┐ржЫрзБ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?**

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржХрж░рж┐ тАФ  
# **ЁЯУЪ ржкрж░рзНржм рззрзй: Related Blogs Section & Estimated Reading Time**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧ ржбрж┐ржЯрзЗржЗрж▓рж╕ ржкрзЗржЬрзЗрж░ ржирж┐ржЪрзЗ **Related Blogs** ржжрзЗржЦрж╛ржирзЛ  
тЬЕ Estimated Reading Time ржЧржгржирж╛ ржХрж░рзЗ ржжрзЗржЦрж╛ржирзЛ  
тЬЕ SEO ржмрж╛рзЬрж╛рждрзЗ ржЗржЙржЬрж╛рж░ рж░рж┐ржЯрзЗржирж╢ржи ржмрж╛рзЬрж╛ржирзЛ  

---

## ЁЯза Step 1: Estimated Reading Time Function рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **lib/readingTime.js** ржирж╛ржорзЗ ржПржХржЯрж┐ рж╣рзЗрж▓рзНржкрж╛рж░ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
export function calculateReadingTime(text) {
  const wordsPerMinute = 200;
  const wordCount = text.split(/\s+/).length;
  const readingTime = Math.ceil(wordCount / wordsPerMinute);
  return readingTime;
}
```

ЁЯФ╣ **рзирзжрзж рж╢ржмрзНржж ржкрзНрж░рждрж┐ ржорж┐ржирж┐ржЯ ржзрж░рзЗ ржЧрзЬ рж░рж┐ржбрж┐ржВ ржЯрж╛ржЗржо рж╣рж┐рж╕рж╛ржм ржХрж░рж╛ рж╣рзЯ**ред

---

## ЁЯФД Step 2: Blog Details ржкрзЗржЗржЬрзЗ Reading Time ржжрзЗржЦрж╛ржУ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
import { calculateReadingTime } from "@/lib/readingTime";

...

{blog && (
  <>
    <h1 className="text-4xl font-bold">{blog.title}</h1>
    <p className="text-gray-500 text-sm">
      By {blog.author.name} | {new Date(blog.createdAt).toLocaleDateString()} | тП▒ {calculateReadingTime(blog.content)} min read
    </p>
    ...
  </>
)}
```

---

## ЁЯдЭ Step 3: Related Blogs ржжрзЗржЦрж╛ржУ (Same Category or Tags-based)

ЁЯУБ **pages/api/blog/related.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  const { blogId, categoryId } = req.query;

  try {
    const relatedBlogs = await prisma.blog.findMany({
      where: {
        categoryId,
        NOT: { id: blogId },
        published: true,
      },
      take: 3,
      orderBy: { createdAt: "desc" },
    });

    res.status(200).json(relatedBlogs);
  } catch {
    res.status(500).json({ error: "Server Error" });
  }
}
```

---

## ЁЯУД Step 4: Blog Details Page-ржП Related Blogs ржжрзЗржЦрж╛ржУ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
const [related, setRelated] = useState([]);

useEffect(() => {
  if (blog) {
    fetch(`/api/blog/related?blogId=${blog.id}&categoryId=${blog.categoryId}`)
      .then((res) => res.json())
      .then((data) => setRelated(data));
  }
}, [blog]);
```

ЁЯСЗ Render Section:

```js
{related.length > 0 && (
  <div className="mt-10">
    <h2 className="text-2xl font-bold mb-4">Related Posts</h2>
    <div className="grid md:grid-cols-3 gap-4">
      {related.map((item) => (
        <div key={item.id} className="border p-4 rounded-md">
          <h3 className="text-lg font-semibold">{item.title}</h3>
          <Link href={`/blog/${item.slug}`} className="text-blue-500 mt-2 block">Read More</Link>
        </div>
      ))}
    </div>
  </div>
)}
```

---

## тЬЕ ржкрж░рзНржм рззрзй ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Estimated Reading Time | Done |
| тЬЕ Related Blogs API | Done |
| тЬЕ Related Blogs UI | Done |
| тЬЕ Fully Dynamic | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯза AI Summary & Content Suggestion (OpenAI API Integration)**  
тЬЕ ржмрзНрж▓ржЧ ржХржиржЯрзЗржирзНржЯ ржерзЗржХрзЗ ржЕржЯрзЛ Summary рждрзИрж░рж┐  
тЬЕ Title ржжрж┐рж▓рзЗ Suggested Headings/Intro Paragraph ржмрж╛ржирж╛ржирзЛ  

ЁЯЯв **рж╢рзБрж░рзБ ржХрж░ржмрзЛ ржХрж┐ AI ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи?**  
OpenAI API Key ржерж╛ржХрж▓рзЗ ржжрж┐ржУ, ржирж╛ ржерж╛ржХрж▓рзЗ ржбрзЗржорзЛ ржжрж┐рзЯрзЗ ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рж┐ред


ржЪрж▓ рж╢рзБрж░рзБ ржХрж░рж┐ ржЖржорж╛ржжрзЗрж░ рж╕ржмржЪрзЗрзЯрзЗ рж╕рзНржорж╛рж░рзНржЯ ржкрж░рзНржм тАФ  
# **ЁЯза ржкрж░рзНржм рззрзк: AI Summary & Content Suggestion (OpenAI Integration)**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржмрзНрж▓ржЧ ржХржиржЯрзЗржирзНржЯ ржерзЗржХрзЗ **Auto Summary** рждрзИрж░рж┐ ржХрж░рж╛  
тЬЕ ржЯрж╛ржЗржЯрзЗрж▓ ржжрж┐рзЯрзЗ **AI Suggested Content/Heading** ржкрж╛ржУрзЯрж╛  
тЬЕ Admin Dashboard-ржП ржПржХржЯрж┐ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХрзЗржЗ ржПржЗ ржлрж┐ржЪрж╛рж░ ржХрж╛ржЬ ржХрж░ржмрзЗ  
тЬЕ OpenAI GPT API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗ  

---

## ЁЯза Step 1: OpenAI API Key рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛

1. [https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys) ржП ржЧрж┐рзЯрзЗ  
2. **ржирждрзБржи API Key** рждрзИрж░рж┐ ржХрж░рзЛ  
3. `.env` ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```env
OPENAI_API_KEY=your_openai_api_key
```

---

## ЁЯУж Step 2: OpenAI SDK ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛

```bash
npm install openai
```

---

## ЁЯУБ Step 3: API Route рждрзИрж░рж┐ ржХрж░рзЛ тАФ `/api/ai/summary.js`

```js
import { OpenAI } from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export default async function handler(req, res) {
  if (req.method !== "POST") return res.status(405).json({ error: "Only POST allowed" });

  const { content } = req.body;

  try {
    const completion = await openai.chat.completions.create({
      model: "gpt-3.5-turbo",
      messages: [
        { role: "system", content: "You are a blogging assistant." },
        { role: "user", content: `Summarize this blog post in 2-3 lines:\n\n${content}` },
      ],
      temperature: 0.7,
    });

    const summary = completion.choices[0].message.content;
    res.status(200).json({ summary });
  } catch (err) {
    res.status(500).json({ error: "AI request failed" });
  }
}
```

---

## ЁЯУБ Step 4: Admin Blog Create Page-ржП AI Summary ржмрж╛ржЯржи ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **pages/admin/create.js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
const [summary, setSummary] = useState("");

const getSummary = async () => {
  const res = await fetch("/api/ai/summary", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ content: form.content }),
  });

  const data = await res.json();
  setSummary(data.summary);
};
```

ЁЯСЗ ржмрж╛ржЯржи ржУ рж░рзЗржЬрж╛рж▓рзНржЯ ржжрзЗржЦрж╛ржУ:

```js
<button type="button" onClick={getSummary} className="bg-purple-600 text-white px-4 py-2">
  тЬи Generate AI Summary
</button>

{summary && (
  <div className="mt-4 bg-gray-100 p-4 rounded">
    <h3 className="font-bold mb-2">AI Summary:</h3>
    <p>{summary}</p>
  </div>
)}
```

---

## ЁЯза Bonus (Title тЖТ Outline Suggestion):

ЁЯСЙ `/api/ai/suggest.js` ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
export default async function handler(req, res) {
  const { title } = req.body;

  const response = await openai.chat.completions.create({
    model: "gpt-3.5-turbo",
    messages: [
      { role: "user", content: `Give me blog outline ideas for the title: ${title}` },
    ],
  });

  const ideas = response.choices[0].message.content;
  res.status(200).json({ ideas });
}
```

ЁЯСЙ Admin Panel-ржП ржЖрж░рзЗржХржЯрж╛ ржмрж╛ржЯржи ржжрж┐рзЯрзЗ title ржЕржирзБржпрж╛рзЯрзА ржХржиржЯрзЗржирзНржЯ рж╕рж╛ржЬрзЗрж╢ржи ржжрзЗржЦрж╛ржирзЛ ржпрж╛ржмрзЗред

---

## тЬЕ ржкрж░рзНржм рззрзк ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ AI Summary API | Done |
| тЬЕ Blog Editor-ржП Integration | Done |
| тЬЕ Title тЖТ Outline Suggestion | Bonus Done |
| тЬЕ Fully dynamic response | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯМР Multilingual Support (i18n) + Bengali-English Blog Toggle**  
тЬЕ ржмрзНрж▓ржЧ ржХржиржЯрзЗржирзНржЯ ржжрзБржЗ ржнрж╛рж╖рж╛рзЯ ржжрзЗржЦрж╛ржирзЛ  
тЬЕ UI Toggle (EN тЗД BN)  
тЬЕ i18n config ржХрж░рж╛  

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНрж▓ржЧ рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржлрж┐ржЪрж╛рж░рзЗ?** ЁЯШД

ржЪрж▓ ржПржмрж╛рж░ ржХрж░рж┐ тАФ  
# **ЁЯМР ржкрж░рзНржм рззрзл: Multilingual Support (i18n) + Bengali-English Blog Toggle**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржмрзНрж▓ржЧ рж╕рж╛ржЗржЯрзЗ **ржмрж╛ржВрж▓рж╛ ржУ ржЗржВрж░рзЗржЬрж┐ ржжрзБржЗ ржнрж╛рж╖рж╛рзЯ ржХржиржЯрзЗржирзНржЯ** ржжрзЗржЦрж╛ржирзЛ  
тЬЕ ржмрзНрж▓ржЧ ржЯрж╛ржЗржЯрзЗрж▓, ржХржиржЯрзЗржирзНржЯ, UI ржЯрзЗржХрзНрж╕ржЯ тАФ ржжрзБржЗ ржнрж╛рж╖рж╛рж░ рж╕рж╛ржкрзЛрж░рзНржЯ  
тЬЕ ржнрж╛рж╖рж╛ Toggle ржмрж╛ржЯржи (ЁЯЗзЁЯЗй BN тЗД EN ЁЯЗмЁЯЗз)  
тЬЕ Next.js i18n ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░  

---

## ЁЯФз Step 1: Next.js `i18n` ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛

ЁЯУБ **next.config.js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
module.exports = {
  i18n: {
    locales: ['en', 'bn'],
    defaultLocale: 'en',
    localeDetection: true,
  },
  reactStrictMode: true,
};
```

ЁЯСЙ ржПрждрзЗ ржХрж░рзЗ рждрзЛржорж╛рж░ URL рж╣ржмрзЗ ржПржоржи:
- `/en/blog/my-blog`
- `/bn/blog/my-blog`

---

## ЁЯМР Step 2: Language Toggle Component рждрзИрж░рж┐ ржХрж░рзЛ

ЁЯУБ **components/LanguageSwitcher.js**

```js
import { useRouter } from 'next/router';

export default function LanguageSwitcher() {
  const router = useRouter();
  const { locale, pathname, asPath, query } = router;

  const toggleLang = () => {
    const nextLocale = locale === 'en' ? 'bn' : 'en';
    router.push({ pathname, query }, asPath, { locale: nextLocale });
  };

  return (
    <button onClick={toggleLang} className="text-sm text-blue-500">
      ЁЯМР {locale === 'en' ? 'ржмрж╛ржВрж▓рж╛' : 'English'}
    </button>
  );
}
```

ЁЯУБ **Header.js** ржП ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ:

```js
import LanguageSwitcher from "./LanguageSwitcher";
...
<nav className="flex gap-4 items-center">
  ...
  <LanguageSwitcher />
</nav>
```

---

## ЁЯзй Step 3: ржмрзНрж▓ржЧ ржоржбрзЗрж▓рзЗ bilingual ржлрж┐рж▓рзНржб ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **schema.prisma** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model Blog {
  ...
  titleBn   String?
  contentBn String?
}
```

ЁЯУж Push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## тЬНя╕П Step 4: Blog Create Page ржП ржмрж╛ржВрж▓рж╛ ржлрж┐рж▓рзНржб ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **pages/admin/create.js**:

```js
<input
  type="text"
  placeholder="Bangla Title"
  value={form.titleBn}
  onChange={(e) => setForm({ ...form, titleBn: e.target.value })}
/>

<ReactQuill
  theme="snow"
  value={form.contentBn}
  onChange={(value) => setForm({ ...form, contentBn: value })}
/>
```

---

## ЁЯМН Step 5: Blog Details ржкрзЗржЗржЬрзЗ ржнрж╛рж╖рж╛ ржЕржирзБржпрж╛рзЯрзА ржХржиржЯрзЗржирзНржЯ ржжрзЗржЦрж╛ржУ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
import { useRouter } from 'next/router';
...
const { locale } = useRouter();
...
<h1>{locale === 'bn' ? blog.titleBn || blog.title : blog.title}</h1>
<div dangerouslySetInnerHTML={{
  __html: locale === 'bn' ? blog.contentBn || blog.content : blog.content
}} />
```

---

## ЁЯМР Step 6: Static UI ржЯрзЗржХрзНрж╕ржЯ bilingual ржХрж░рзЛ (Optional i18n lib рж╕рж╣)

ржЪрж╛ржЗрж▓рзЗ `next-translate` ржмрж╛ `next-i18next` ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЗ ржЗржЙржЬ ржХрж░рзЛ, ржЕржержмрж╛ ржирж┐ржЬрзЗ ржХржирзНржбрж┐рж╢ржи ржжрж┐рзЯрзЗ UI ржЯрзЗржХрзНрж╕ржЯ ржмрж╛ржВрж▓рж╛/ржЗржВрж▓рж┐рж╢ ржжрзЗржЦрж╛ржУред

```js
{locale === 'bn' ? "рж╕ржорзНржкрж░рзНржХрж┐ржд ржмрзНрж▓ржЧрж╕ржорзВрж╣" : "Related Posts"}
```

---

## тЬЕ ржкрж░рзНржм рззрзл ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ i18n Config | Done |
| тЬЕ Language Toggle | Done |
| тЬЕ Blog Bilingual Content | Done |
| тЬЕ Language-Aware Rendering | Done |
| тЬЕ Full URL-based Switching | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯУИ Blog Analytics (Views Count + Popular Posts)**  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗ ржнрж┐ржЙ ржХрж╛ржЙржирзНржЯ  
тЬЕ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржжрзЗржЦрж╛ ржмрзНрж▓ржЧ рж▓рж┐рж╕рзНржЯ ржХрж░рж╛  
тЬЕ Page refresh ржХрж░рзЗ ржнрж┐ржЙ ржмрж╛рзЬржмрзЗ ржирж╛

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ Analytics System ржмрж╛ржирж╛рждрзЗ?** ЁЯУК

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржмрж╛ржирж╛ржЗ тАФ  
# **ЁЯУИ ржкрж░рзНржм рззрзм: Blog Analytics тАУ Views Count + Popular Posts**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧ ржкрзЛрж╕рзНржЯрзЗ **ржнрж┐ржЙ ржХрж╛ржЙржирзНржЯ** ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛  
тЬЕ ржХрзЗржмрж▓ **ржЗржЙржирж┐ржХ ржнрж┐ржЙ** ржЧржгржирж╛ (рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рж▓рзЗ ржмрж╛рж░ржмрж╛рж░ ржирж╛ ржмрж╛рзЬрзЗ)  
тЬЕ рж╣рзЛржоржкрзЗржЬ ржмрж╛ рж╕рж╛ржЗржбржмрж╛рж░рзЗ **Most Popular Blogs** ржжрзЗржЦрж╛ржирзЛ  

---

## ЁЯзй Step 1: Prisma Schema-рждрзЗ View Count ржлрж┐рж▓рзНржб ржЕрзНржпрж╛ржб ржХрж░рзЛ

ЁЯУБ **prisma/schema.prisma** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model Blog {
  ...
  views Int @default(0)
}
```

ЁЯУж ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ Push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## ЁЯФБ Step 2: View Count ржмрж╛рзЬрж╛ржирзЛрж░ API ржмрж╛ржирж╛ржУ

ЁЯУБ **pages/api/blog/view.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  if (req.method !== "POST") return res.status(405).json({ error: "Method not allowed" });

  const { slug } = req.body;

  try {
    await prisma.blog.update({
      where: { slug },
      data: { views: { increment: 1 } },
    });

    res.status(200).json({ message: "View counted" });
  } catch (err) {
    res.status(500).json({ error: "Error counting view" });
  }
}
```

---

## ЁЯМН Step 3: Blog Details ржкрзЗржЗржЬрзЗ View ржХрж╛ржЙржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рзЛ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
useEffect(() => {
  if (slug && localStorage) {
    const viewedKey = `viewed-${slug}`;
    if (!localStorage.getItem(viewedKey)) {
      fetch("/api/blog/view", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ slug }),
      });
      localStorage.setItem(viewedKey, "true");
    }
  }
}, [slug]);
```

ЁЯФ╣ **ржмрзНржпрж╛ржЦрзНржпрж╛:**  
ЁЯСЙ рж▓рзЛржХрж╛рж▓рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрзНрж░рждрж┐ ржЗржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржп ржПржХржмрж╛рж░ржЗ ржХрж╛ржЙржирзНржЯ рж╣ржмрзЗред  
ЁЯСЙ Refresh ржХрж░рж▓рзЗржУ ржнрж┐ржЙ ржЖрж░ ржмрж╛рзЬржмрзЗ ржирж╛ред

---

## ЁЯФе Step 4: Blog Post UI-рждрзЗ Views ржжрзЗржЦрж╛ржУ

```js
<p className="text-sm text-gray-500">
  {blog.views} views | {calculateReadingTime(blog.content)} min read
</p>
```

---

## ЁЯМЯ Step 5: Most Viewed Blogs ржжрзЗржЦрж╛ржирзЛрж░ API ржмрж╛ржирж╛ржУ

ЁЯУБ **pages/api/blog/popular.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  try {
    const blogs = await prisma.blog.findMany({
      where: { published: true },
      orderBy: { views: "desc" },
      take: 5,
    });

    res.status(200).json(blogs);
  } catch {
    res.status(500).json({ error: "Something went wrong" });
  }
}
```

---

## ЁЯз▒ Step 6: Sidebar-ржП Popular Posts ржжрзЗржЦрж╛ржУ

ЁЯУБ **components/Sidebar.js** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
import { useEffect, useState } from "react";
import Link from "next/link";

export default function Sidebar() {
  const [popular, setPopular] = useState([]);

  useEffect(() => {
    fetch("/api/blog/popular")
      .then((res) => res.json())
      .then((data) => setPopular(data));
  }, []);

  return (
    <aside className="w-64 bg-gray-100 p-4 rounded-lg">
      <h2 className="text-lg font-semibold mb-4">ЁЯФе Popular Blogs</h2>
      <ul>
        {popular.map((blog) => (
          <li key={blog.id} className="mb-2">
            <Link href={`/blog/${blog.slug}`} className="text-blue-600 hover:underline">
              {blog.title} ({blog.views})
            </Link>
          </li>
        ))}
      </ul>
    </aside>
  );
}
```

---

## тЬЕ ржкрж░рзНржм рззрзм ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Views Field | Done |
| тЬЕ Count API | Done |
| тЬЕ Unique View (localStorage) | Done |
| тЬЕ Show View Count | Done |
| тЬЕ Popular Blogs API | Done |
| тЬЕ Sidebar Integration | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯФД Pagination + Infinite Scroll System**  
тЬЕ ржкрзНрж░рждрж┐ ржкрзЗржЗржЬрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржмрзНрж▓ржЧ  
тЬЕ рж▓рзЛржб ржорзЛрж░ ржмрж╛ржЯржи / ржЕржЯрзЛ infinite scroll  
тЬЕ Performance optimized listing  

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ Pagination ржлрж┐ржЪрж╛рж░рзЗ?** ЁЯФД

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржХрж░рж┐ тАФ  
# **ЁЯФД ржкрж░рзНржм рззрзн: Pagination + Infinite Scroll for Blog Listing**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржмрзНрж▓ржЧ рж▓рж┐рж╕рзНржЯ ржкрзЗржЗржЬрзЗ ржкрзНрж░рждрж┐ ржкрзЗржЗржЬрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржмрзНрж▓ржЧ ржжрзЗржЦрж╛ржирзЛ  
тЬЕ тАЬLoad MoreтАЭ ржмрж╛ржЯржирзЗ ржирждрзБржи ржмрзНрж▓ржЧ рж▓рзЛржб рж╣ржУрзЯрж╛  
тЬЕ ржЪрж╛ржЗрж▓рзЗ ржкрж░рзЗ **Auto Infinite Scroll** ржпрзЛржЧ ржХрж░рж╛  
тЬЕ SEO ржлрзНрж░рзЗржирзНржбрж▓рж┐, Fast Rendering  

---

## ЁЯза Pagination Strategy

- Backend тЖТ `/api/blog/paginated?page=1&limit=6`  
- Frontend тЖТ ржкрзНрж░ржержорзЗ ржХрж┐ржЫрзБ ржмрзНрж▓ржЧ ржжрзЗржЦрж╛ржмрзЗ  
- рждрж╛рж░ржкрж░ **тАЬLoad MoreтАЭ** ржмрж╛ржЯржирзЗ ржкрж░ржмрж░рзНрждрзА ржмрзНрж▓ржЧ ржлрзЗржЪ рж╣ржмрзЗ  

---

## ЁЯУБ Step 1: Paginated Blog API ржмрж╛ржирж╛ржУ

ЁЯУБ **pages/api/blog/paginated.js** ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  const page = parseInt(req.query.page) || 1;
  const limit = parseInt(req.query.limit) || 6;
  const skip = (page - 1) * limit;

  try {
    const blogs = await prisma.blog.findMany({
      skip,
      take: limit,
      orderBy: { createdAt: "desc" },
      include: { author: true, category: true, tags: true },
    });

    const total = await prisma.blog.count();
    const hasMore = skip + limit < total;

    res.status(200).json({ blogs, hasMore });
  } catch {
    res.status(500).json({ error: "Something went wrong" });
  }
}
```

---

## ЁЯз▒ Step 2: Homepage-ржП Pagination ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **pages/index.js** ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
import { useState, useEffect } from "react";
import SearchBar from "@/components/SearchBar";
import Link from "next/link";

export default function Home() {
  const [blogs, setBlogs] = useState([]);
  const [page, setPage] = useState(1);
  const [hasMore, setHasMore] = useState(true);

  useEffect(() => {
    loadBlogs(page);
  }, []);

  const loadBlogs = async (currentPage) => {
    const res = await fetch(`/api/blog/paginated?page=${currentPage}&limit=6`);
    const data = await res.json();

    setBlogs((prev) => [...prev, ...data.blogs]);
    setHasMore(data.hasMore);
  };

  const handleLoadMore = () => {
    const nextPage = page + 1;
    setPage(nextPage);
    loadBlogs(nextPage);
  };

  return (
    <div className="container mx-auto py-10">
      <h1 className="text-4xl font-bold text-center mb-6">Latest Blogs</h1>
      <SearchBar />

      <div className="grid md:grid-cols-3 gap-6">
        {blogs.map((blog) => (
          <div key={blog.id} className="border p-4 rounded-md">
            <h2 className="text-xl font-semibold">{blog.title}</h2>
            <p className="text-sm text-gray-500">{blog.views} views</p>
            <p className="mt-2 text-gray-700" dangerouslySetInnerHTML={{
              __html: blog.content.substring(0, 100)
            }}></p>
            <Link href={`/blog/${blog.slug}`} className="text-blue-500 mt-2 inline-block">Read More</Link>
          </div>
        ))}
      </div>

      {hasMore && (
        <div className="text-center mt-8">
          <button onClick={handleLoadMore} className="bg-blue-600 text-white px-6 py-2 rounded">
            Load More
          </button>
        </div>
      )}
    </div>
  );
}
```

---

## ЁЯТб Optional Step: Infinite Scroll (auto trigger on scroll)

ржПржЯрж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж░рж╛ ржкрж░рзЗ ржХрж░ржмрзЛ тАФ Intersection Observer ржжрж┐рзЯрзЗред

---

## тЬЕ ржкрж░рзНржм рззрзн ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Paginated API | Done |
| тЬЕ Blog Listing with Page State | Done |
| тЬЕ Load More Button | Done |
| тЬЕ Smooth UX & SEO-friendly | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯУД Printable Version & PDF Export (Blog)**  
тЬЕ ржмрзНрж▓ржЧ ржкрзНрж░рж┐ржирзНржЯ-ржлрзНрж░рзЗржирзНржбрж▓рж┐ ржлрж░ржорзНржпрж╛ржЯрзЗ рж░рзЗржирзНржбрж╛рж░  
тЬЕ "Download as PDF" ржмрж╛ржЯржи  
тЬЕ рж╣рж╛ржЗ-ржХрзЛрзЯрж╛рж▓рж┐ржЯрж┐ PDF (html2pdf.js or Puppeteer)

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ PDF Export ржлрж┐ржЪрж╛рж░рзЗ?** ЁЯЦия╕ПЁЯУД

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржХрж░рж┐ тАФ  
# **ЁЯУД ржкрж░рзНржм рззрзо: Printable Version & PDF Export of Blog Posts**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ ржЬржирзНржп **ржкрзНрж░рж┐ржирзНржЯ ржлрзНрж░рзЗржирзНржбрж▓рж┐ ржнрж┐ржЙ**  
тЬЕ ржПржХржЯрж┐ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХрзЗржЗ **PDF ржбрж╛ржЙржирж▓рзЛржб**  
тЬЕ Clean, readable, branding-friendly output  
тЬЕ Browser-based (Client-side PDF export)  

---

## ЁЯУж Step 1: `html2pdf.js` рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЛ

```bash
npm install html2pdf.js
```

---

## ЁЯз▒ Step 2: Blog Details ржкрзЗржЗржЬрзЗ PDF Export ржмрж╛ржЯржи ржУ ржлрж╛ржВрж╢ржи ржпрзЛржЧ ржХрж░рзЛ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```js
import dynamic from "next/dynamic";
import { useRef } from "react";

const html2pdf = dynamic(() => import("html2pdf.js"), { ssr: false });
```

ЁЯСЗ ржбрж╛ржЙржирж▓рзЛржб ржлрж╛ржВрж╢ржи:

```js
const pdfRef = useRef();

const downloadPDF = () => {
  const element = pdfRef.current;
  const opt = {
    margin: 0.5,
    filename: `${blog.title}.pdf`,
    image: { type: "jpeg", quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
  };

  html2pdf().set(opt).from(element).save();
};
```

ЁЯСЗ ржбрж╛ржЙржирж▓рзЛржб ржмрж╛ржЯржи ржПржмржВ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ржб ржХржиржЯрзЗржЗржирж╛рж░:

```js
<div className="text-right mb-4">
  <button onClick={downloadPDF} className="bg-green-600 text-white px-4 py-2 rounded">
    ЁЯУД Download as PDF
  </button>
</div>

<div ref={pdfRef} className="bg-white p-6 shadow rounded print:shadow-none print:p-0">
  <h1 className="text-4xl font-bold mb-2">{blog.title}</h1>
  <p className="text-gray-600 text-sm">
    By {blog.author.name} | {new Date(blog.createdAt).toLocaleDateString()}
  </p>
  <div className="mt-4 text-lg" dangerouslySetInnerHTML={{ __html: blog.content }} />
</div>
```

---

## ЁЯЦия╕П Step 3: Optional тАУ ржкрзНрж░рж┐ржирзНржЯ ржлрзНрж░рзЗржирзНржбрж▓рж┐ CSS

ЁЯУБ **styles/globals.css** ржП ржпрзБржХрзНржд ржХрж░рзЛ:

```css
@media print {
  .print\:hidden {
    display: none;
  }

  .print\:shadow-none {
    box-shadow: none !important;
  }

  .print\:p-0 {
    padding: 0 !important;
  }
}
```

---

## тЬЕ ржкрж░рзНржм рззрзо ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ PDF Export (Client-side) | Done |
| тЬЕ Clean Layout | Done |
| тЬЕ One-click Download | Done |
| тЬЕ Print Friendly Styling | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯТм Blog Comments System (Disqus & Custom)**  
тЬЕ ржкрж╛ржаржХрж░рж╛ ржоржирзНрждржмрзНржп ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ  
тЬЕ Disqus ржмрж╛ ржирж┐ржЬрж╕рзНржм comment storage  
тЬЕ рж╕рзНржкрзНржпрж╛ржо ржлрж┐рж▓рзНржЯрж╛рж░, Auth, ржоржбрж╛рж░рзЗрж╢ржи (ржкрж░ржмрж░рзНрждрзА)

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ ржХржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗ?** ЁЯТм

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржпрзБржХрзНржд ржХрж░рж┐ тАФ  
# **ЁЯТм ржкрж░рзНржм рззрзп: Blog Comments System (Disqus & Custom Integration)**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ ржирж┐ржЪрзЗ **ржХржорзЗржирзНржЯ рж╕рзЗржХрж╢ржи** ржерж╛ржХржмрзЗ  
тЬЕ ржкрзНрж░ржержорзЗ **Disqus Integration** ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ ржХрж░ржмрзЛ (рж╕рж╣ржЬ ржУ ржжрзНрж░рзБржд)  
тЬЕ ржПрж░ржкрж░ ржЪрж╛ржЗрж▓рзЗ **Custom Comment System** ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░ржмрзЛ (user-auth, db-store рж╕рж╣)  

---

## ЁЯеЗ **Step 1: Disqus Integration (Easiest & SEO Friendly)**

### тЬЕ рзз. Disqus Account ржУ Site рждрзИрж░рж┐ ржХрж░рзЛ
1. ржпрж╛ржУ [https://disqus.com/profile/signup/](https://disqus.com/profile/signup/)
2. тАЬI want to install Disqus on my siteтАЭ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ
3. Site Name ржжрж╛ржУ (ржпрзЗржоржи: `nextjs-blog-cms`)
4. Platform: **Universal Code** рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ
5. Disqus Shortname (e.g., `nextjsblogcms`) рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЛ

---

### тЬЕ рзи. Blog Details ржкрзЗржЗржЬрзЗ Disqus ржХржорзНржкрзЛржирзЗржирзНржЯ ржпрзБржХрзНржд ржХрж░рзЛ

ЁЯУБ **components/DisqusComments.js** рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { DiscussionEmbed } from "disqus-react";

export default function DisqusComments({ post }) {
  const disqusShortname = "your_disqus_shortname"; // ЁЯФБ Replace this
  const disqusConfig = {
    url: `https://yourdomain.com/blog/${post.slug}`,
    identifier: post.id,
    title: post.title,
  };

  return (
    <div className="mt-10">
      <h2 className="text-2xl font-bold mb-4">ЁЯТм Comments</h2>
      <DiscussionEmbed shortname={disqusShortname} config={disqusConfig} />
    </div>
  );
}
```

ЁЯСЙ `yourdomain.com` ржбрзЗржнрзЗ ржерж╛ржХрж▓рзЗ `http://localhost:3000` ржжрж┐рзЯрзЗржУ ржХрж╛ржЬ ржХрж░ржмрзЗред

---

### тЬЕ рзй. `disqus-react` ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЛ

```bash
npm install disqus-react
```

---

### тЬЕ рзк. Blog Details ржкрзЗржЗржЬрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржХрж▓ ржХрж░рзЛ

ЁЯУБ **pages/blog/[slug].js** ржлрж╛ржЗрж▓рзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```js
import DisqusComments from "@/components/DisqusComments";
...
<DisqusComments post={blog} />
```

---

## ЁЯУж Ready! ржПржЦржи ржкрзНрж░рждрж┐ржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ ржирж┐ржЪрзЗ ржбрж┐рж╕рзНржХрж╛рж╕ ржХржорзЗржирзНржЯ рж╕рзЗржХрж╢ржи ржЪрж▓рзЗ ржЖрж╕ржмрзЗ:

тЬЕ SEO ржлрзНрж░рзЗржирзНржбрж▓рж┐  
тЬЕ Logged-in Users (Facebook, Google, Disqus)  
тЬЕ рж╕рзНржкрзНржпрж╛ржо ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ & ржоржбрж╛рж░рзЗрж╢ржи  
тЬЕ ржЕржЯрзЛ рж▓рзЛржбрж┐ржВ, ржЗржЙржЬрж╛рж░ ржлржЯрзЛ, рж░рж┐ржкрзНрж▓рж╛ржЗ рж╕рж╛ржкрзЛрж░рзНржЯ  

---

## ЁЯФз Want Custom Comments System?

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржкрж░рзЗрж░ ржкрж░рзНржмрзЗ **Custom Comment System** ржХрж░рждрзЗ ржкрж╛рж░рж┐:

| ржлрж┐ржЪрж╛рж░ | ржХрж░рж╛ рж╣ржмрзЗ |
|--------|---------|
| тЬЕ ржЗржЙржЬрж╛рж░ Authentication (NextAuth) | Login ржЫрж╛рзЬрж╛ ржХржорзЗржирзНржЯ ржирзЯ |
| тЬЕ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХржорзЗржирзНржЯ рж╕рзЗржн | Prisma Model |
| тЬЕ Reply to Comment (Nested) | Optional |
| тЬЕ Admin Panel ржП ржоржбрж╛рж░рзЗрж╢ржи | Hide/Approve/Delete |

---

## тЬЕ ржкрж░рзНржм рззрзп ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Disqus Integration | Done |
| тЬЕ Fully Functional Comments | Done |
| тЬЕ Blog-wise Comments Tracking | Done |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯФР Two-Factor Authentication (2FA with Email or OTP)**  
тЬЕ ржЗржЙржЬрж╛рж░ Login ржХрж░рж▓рзЗ ржХрзЛржб ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рждрзЗ рж╣ржмрзЗ  
тЬЕ Extra Security for Admin Users  

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ Security Feature ржП? ржирж╛ржХрж┐ Custom Comments ржмрж╛ржирж╛рждрзЗ ржЪрж╛ржУ?**

ржжрж╛рж░рзБржг! ржПржЦржи ржЖржорж░рж╛ ржХрж░ржмрзЛ тАФ  
# **ЁЯТм ржкрж░рзНржм рзирзж: Custom Comment System (Fully Functional in Your Blog)**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржХрж░рж▓рзЗ **ржХржорзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ**  
тЬЕ **Prisma ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХржорзЗржирзНржЯ рж╕рзЗржн рж╣ржмрзЗ**  
тЬЕ ржХржорзЗржирзНржЯржЧрзБрж▓рзЛ **ржмрзНрж▓ржЧ ржнрж┐рждрзНрждрж┐ржХ ржлрж┐рж▓рзНржЯрж╛рж░ рж╣рзЯрзЗ ржжрзЗржЦрж╛ржмрзЗ**  
тЬЕ (ржЕржкрж╢ржирж╛рж▓: Reply, Admin ржоржбрж╛рж░рзЗрж╢ржи, Approval system)

---

## ЁЯФз Step 1: Prisma Schema-рждрзЗ `Comment` Model ржЕрзНржпрж╛ржб ржХрж░рзЛ

ЁЯУБ **schema.prisma** ржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model Comment {
  id        String   @id @default(uuid())
  content   String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  blog      Blog     @relation(fields: [blogId], references: [id])
  blogId    String
}
```

ЁЯУж ржПрж░ржкрж░ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ Push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## ЁЯЫая╕П Step 2: API Routes ржмрж╛ржирж╛ржУ

### тЬЕ `POST` тАУ ржирждрзБржи ржХржорзЗржирзНржЯ рждрзИрж░рж┐  
ЁЯУБ **pages/api/comment/create.js**

```js
import { getSession } from "next-auth/react";
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  if (req.method !== "POST") return res.status(405).json({ error: "Method not allowed" });

  const session = await getSession({ req });
  if (!session) return res.status(401).json({ error: "Unauthorized" });

  const { content, blogId } = req.body;
  if (!content || !blogId) return res.status(400).json({ error: "Missing fields" });

  const comment = await prisma.comment.create({
    data: {
      content,
      blogId,
      userId: session.user.id,
    },
    include: { user: true },
  });

  res.status(201).json(comment);
}
```

---

### тЬЕ `GET` тАУ ржПржХржЯрж┐ ржмрзНрж▓ржЧрзЗрж░ рж╕ржм ржХржорзЗржирзНржЯ ржжрзЗржЦрж╛ржирзЛ  
ЁЯУБ **pages/api/comment/[blogId].js**

```js
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  const { blogId } = req.query;

  try {
    const comments = await prisma.comment.findMany({
      where: { blogId },
      include: { user: true },
      orderBy: { createdAt: "desc" },
    });

    res.status(200).json(comments);
  } catch {
    res.status(500).json({ error: "Failed to fetch comments" });
  }
}
```

---

## ЁЯз▒ Step 3: Blog Details ржкрзЗржЗржЬрзЗ ржХржорзЗржирзНржЯ UI ржжрзЗржЦрж╛ржУ

ЁЯУБ **components/Comments.js** (ржирждрзБржи ржХржорзНржкрзЛржирзЗржирзНржЯ)

```js
import { useEffect, useState } from "react";
import { useSession } from "next-auth/react";

export default function Comments({ blogId }) {
  const { data: session } = useSession();
  const [comments, setComments] = useState([]);
  const [input, setInput] = useState("");

  useEffect(() => {
    fetch(`/api/comment/${blogId}`)
      .then((res) => res.json())
      .then((data) => setComments(data));
  }, [blogId]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!input.trim()) return;

    const res = await fetch("/api/comment/create", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content: input, blogId }),
    });

    const newComment = await res.json();
    setComments([newComment, ...comments]);
    setInput("");
  };

  return (
    <div className="mt-10">
      <h2 className="text-2xl font-bold mb-4">ЁЯТм Comments</h2>

      {session ? (
        <form onSubmit={handleSubmit} className="mb-6">
          <textarea
            className="w-full border p-2 rounded"
            placeholder="Write your comment..."
            value={input}
            onChange={(e) => setInput(e.target.value)}
          />
          <button type="submit" className="bg-blue-600 text-white px-4 py-2 mt-2 rounded">
            Post Comment
          </button>
        </form>
      ) : (
        <p className="text-gray-500">Please login to comment.</p>
      )}

      <div className="space-y-4">
        {comments.map((c) => (
          <div key={c.id} className="border p-3 rounded bg-gray-50">
            <p className="text-sm font-semibold">{c.user.name}</p>
            <p className="text-gray-700">{c.content}</p>
            <p className="text-xs text-gray-400">{new Date(c.createdAt).toLocaleString()}</p>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ЁЯУД Step 4: Blog Details ржкрзЗржЗржЬрзЗ ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржХрж▓ ржХрж░рзЛ

ЁЯУБ **pages/blog/[slug].js** ржПрж░ рж╢рзЗрж╖рзЗ:

```js
import Comments from "@/components/Comments";
...
<Comments blogId={blog.id} />
```

---

## тЬЕ ржкрж░рзНржм рзирзж ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ Custom Comments | Done |
| тЬЕ Authenticated Post | Done |
| тЬЕ Blog-wise Comments | Done |
| тЬЕ Real-time Update | Done |
| тЬЕ Fully Functional | тЬЕ |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯФР Two-Factor Authentication (2FA тАУ OTP or Email Code)**  
тЬЕ Admin login ржХрж░рж▓рзЗ ржХрзЛржб ржнрзЗрж░рж┐ржлрж╛ржЗ рж▓рж╛ржЧржмрзЗ  
тЬЕ OTP/Code via Email or App  

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ Advanced Login Security ржлрж┐ржЪрж╛рж░рзЗ? ржирж╛ржХрж┐ Nested Comments / Admin Moderation ржмрж╛ржирж╛рждрзЗ ржЪрж╛ржУ?**

ржЪрж▓ рждрж╛рж╣рж▓рзЗ ржПржмрж╛рж░ ржХрж░рж┐ тАФ  
# **ЁЯФР ржкрж░рзНржм рзирзз: Two-Factor Authentication (2FA) via Email OTP**

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп:  
тЬЕ **Login ржХрж░рж╛рж░ ржкрж░ OTP/Code Verification** рж▓рж╛ржЧржмрзЗ  
тЬЕ Admin ржУ User тАУ ржжрзБржЗржЬржирзЗрж░ ржЬржирзНржпржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ  
тЬЕ Email ржПрж░ ржорж╛ржзрзНржпржорзЗ OTP ржкрж╛ржарж╛ржирзЛ  
тЬЕ OTP ржирж╛ ржжрж┐рж▓рзЗ Dashboard ржП ржкрзНрж░ржмрзЗрж╢ рж╕ржорзНржнржм ржирзЯ  

---

## ЁЯФз Step 1: Prisma Schema-рждрзЗ OTP ржлрж┐рж▓рзНржб ржЕрзНржпрж╛ржб ржХрж░рзЛ

ЁЯУБ **schema.prisma** ржЖржкржбрзЗржЯ ржХрж░рзЛ:

```prisma
model User {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String
  role      String   @default("user")
  otp       String?  // тЬЕ OTP Code
  otpExpiry DateTime? // тЬЕ Expiry time
  posts     Blog[]
  comments  Comment[]
}
```

ЁЯУж ржПрж░ржкрж░ Push ржХрж░рзЛ:
```bash
npx prisma db push
```

---

## ЁЯУз Step 2: Nodemailer ржЗржирзНрж╕ржЯрж▓ ржХрж░рзЛ (for sending email)

```bash
npm install nodemailer
```

ЁЯУБ **.env** ржлрж╛ржЗрж▓рзЗ SMTP ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзЛ (example for Gmail):

```env
EMAIL_SERVER=smtp://your_email@gmail.com:your_app_password@smtp.gmail.com:587
EMAIL_FROM=Blog CMS <your_email@gmail.com>
```

---

## ЁЯЫая╕П Step 3: `/api/auth/send-otp.js` API ржмрж╛ржирж╛ржУ

ЁЯУБ **pages/api/auth/send-otp.js**

```js
import { PrismaClient } from "@prisma/client";
import nodemailer from "nodemailer";
const prisma = new PrismaClient();

export default async function handler(req, res) {
  const { email } = req.body;

  const user = await prisma.user.findUnique({ where: { email } });
  if (!user) return res.status(404).json({ error: "User not found" });

  const otp = Math.floor(100000 + Math.random() * 900000).toString();
  const expiry = new Date(Date.now() + 10 * 60 * 1000); // 10 minutes

  await prisma.user.update({
    where: { email },
    data: { otp, otpExpiry: expiry },
  });

  // Send email
  const transporter = nodemailer.createTransport({
    service: "gmail",
    auth: {
      user: process.env.EMAIL_FROM,
      pass: process.env.EMAIL_SERVER.split(":")[2].split("@")[0],
    },
  });

  await transporter.sendMail({
    from: process.env.EMAIL_FROM,
    to: email,
    subject: "Your OTP for Blog Login",
    text: `Your OTP is ${otp}`,
  });

  res.status(200).json({ message: "OTP sent" });
}
```

---

## ЁЯз╛ Step 4: OTP Verification API ржмрж╛ржирж╛ржУ

ЁЯУБ **pages/api/auth/verify-otp.js**

```js
export default async function handler(req, res) {
  const { email, otp } = req.body;

  const user = await prisma.user.findUnique({ where: { email } });
  if (!user || user.otp !== otp) {
    return res.status(401).json({ error: "Invalid OTP" });
  }

  if (new Date() > user.otpExpiry) {
    return res.status(400).json({ error: "OTP expired" });
  }

  // Clear OTP
  await prisma.user.update({
    where: { email },
    data: { otp: null, otpExpiry: null },
  });

  res.status(200).json({ message: "OTP verified" });
}
```

---

## ЁЯУД Step 5: Login ржПрж░ ржкрж░ Redirect ржХрж░рзЛ `/verify-otp` ржкрзЗржЗржЬрзЗ

ЁЯУБ **pages/auth/verify-otp.js** рждрзИрж░рж┐ ржХрж░рзЛ:

```js
import { useState } from "react";
import { useRouter } from "next/router";

export default function VerifyOTP() {
  const [otp, setOtp] = useState("");
  const router = useRouter();
  const { email } = router.query;

  const handleSubmit = async (e) => {
    e.preventDefault();
    const res = await fetch("/api/auth/verify-otp", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, otp }),
    });

    if (res.ok) {
      router.push("/dashboard");
    } else {
      alert("Invalid OTP");
    }
  };

  return (
    <div className="max-w-md mx-auto mt-20">
      <h1 className="text-2xl font-bold mb-4">Verify OTP</h1>
      <form onSubmit={handleSubmit} className="space-y-4">
        <input
          type="text"
          value={otp}
          onChange={(e) => setOtp(e.target.value)}
          placeholder="Enter OTP"
          className="w-full border p-2"
        />
        <button className="bg-blue-600 text-white px-4 py-2 w-full">Verify</button>
      </form>
    </div>
  );
}
```

---

## тЬЕ ржкрж░рзНржм рзирзз ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ:

| ржлрж┐ржЪрж╛рж░ | рж╕рзНржЯрзЗржЯрж╛рж╕ |
|--------|---------|
| тЬЕ OTP Generation | Done |
| тЬЕ Email Sending | Done |
| тЬЕ Verification | Done |
| тЬЕ Dashboard Restriction | Done |
| тЬЕ Secure Auth Flow | тЬЕ |

---

## ЁЯФЬ ржкрж░ржмрж░рзНрждрзА ржкрж░рзНржм:
**ЁЯзй Plugin System + Modular Architecture**  
тЬЕ Future features ржкрзНрж▓рж╛ржЧрж┐ржи ржЖржХрж╛рж░рзЗ ржпрзБржХрзНржд/ржЕржкрж╕рж╛рж░ржгржпрзЛржЧрзНржп  
тЬЕ Clean structure: `modules/blog`, `modules/user`, `modules/comments`  
тЬЕ Easy maintenance, scalable CMS structure

ЁЯЯв **ржЪрж▓ржмрзЛ ржХрж┐ ржоржбрзБрж▓рж╛рж░ ржбрж┐ржЬрж╛ржЗржи/ржкрзНрж▓рж╛ржЧрж┐ржи рж╕рж╛ржкрзЛрж░рзНржЯ ржП? ржирж╛ржХрж┐ 2FA рждрзЗ SMS/Authenticator ржХрзЛржб ржЪрж╛ржЗ?**

